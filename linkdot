# create dot directories
for dotdir in $(find $HOME/dot/files -type d -not -path '*/\.*'); do
  mkdir -p ${dotdir/\/dot\/files\//\/.}
done
# symlink dot files
for dotfile in $(find $HOME/dot/files -type f -not -path '*/\.*'); do
  dest=${dotfile/\/dot\/files\//\/.}
  if [ ! -f "$dest" ]; then
    echo "linking $dotfile => $dest"
    ln -sf $dotfile $dest
  elif [ "$(readlink -- "$dest")" != "$dotfile" ]; then
    echo "could not link $dotfile => $dest"
  fi
done
